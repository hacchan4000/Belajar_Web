<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game</title>
</head>
<body>
  <input type="text" onkeydown="handleKeys(event)">

  <button onclick="rock()">rock</button>
  <button onclick="paper()">paper</button>
  <button onclick="scissor()">scissor</button>
  <button onclick="reset()">Reset</button>

  <p id="ket"></p>
  <p class ="resFinal"></p>

  <h4 id="resultPlayer">Wins : </h4>
  <h4 id="resultComp">Loses : </h4>
  <h4 id="ties">Ties :</h4>
  
  <script>  
    function handleKeys(event){ // untuk liat keys yang diteken user di keyboard
      return console.log(event.key)
    }
    console.log(event) // untuk nyatet semua yang diketik user di keyboard
    const skor = JSON.parse(localStorage.getItem('skor')) || {
        skorPlayer: 0,
        skorComp: 0,
        ties: 0,
    }
    document.getElementById("resultPlayer").textContent = `Wins : ${skor.skorPlayer}`
    document.getElementById("resultComp").textContent = `Loses : ${skor.skorComp}`
    document.getElementById("ties").textContent = `Ties : ${skor.ties}`

    // jaga-jaga klo skor jd null, dibawah ini sama aja kea || diatas
    /*
    if(!skor){ // gabisa skor === null krn null itu falsy, kalo !null = true
      skor = {
        skorPlayer: 0,
        skorComp: 0,
        ties: 0,
      }
    }
      
    */

    function reset(){
      skor.skorPlayer = 0 ,skor.skorComp = 0, skor.ties = 0

      document.getElementById("ties").textContent = `Ties : ${skor.ties}`
      document.getElementById("resultPlayer").textContent = `Wins : ${skor.skorPlayer}`
      document.getElementById("resultComp").textContent = `Loses : ${skor.skorComp}`

      document.getElementById("ket").textContent = ''
      document.querySelector('.resFinal').innerHTML = ''
      
    }
    function match(){
      let pilihanComp = Math.random()
      let hasilComp = ''
      
      if (pilihanComp < 0.3) {
        hasilComp = 'rock'
      } else if (pilihanComp >= 0.3 && pilihanComp < 0.6) {
        hasilComp = 'paper'
      }
      else {
        hasilComp = 'scissor'
      }

      return hasilComp
    }
    
    

    

    function rock(){ //pilihan player
      let comp = match()
      if(comp === 'rock'){
        document.getElementById("ket").textContent = `Computer choose ${comp} - You choose Rock`
        document.querySelector('.resFinal').innerHTML = 'Ties'

        document.getElementById("ties").textContent = `Ties : ${skor.ties+=1}`
        localStorage.setItem('skor',JSON.stringify(skor)) // masukin pesan ke local storage dengan identifier message
        
      }else if (comp === 'scissor'){
        document.getElementById("ket").textContent = `Computer choose ${comp} - You choose Rock`
        document.querySelector('.resFinal').innerHTML = 'Wins'

        document.getElementById("resultPlayer").textContent = `Wins : ${skor.skorPlayer+=1}`
        localStorage.setItem('skor',JSON.stringify(skor))
      }else {
        document.getElementById("ket").textContent = `Computer choose ${comp} - You choose Rock`
        document.querySelector('.resFinal').innerHTML = 'Lose'

        document.getElementById("resultComp").textContent = `Loses : ${skor.skorComp+=1}`
        localStorage.setItem('skor',JSON.stringify(skor))
      }
      console.log(localStorage.getItem('skor')) // cara ngeluarin pesan dr local storage

    }
    function paper(){
      let comp = match()
      if(comp === 'paper'){
        document.getElementById("ket").textContent = `Computer choose ${comp} - You choose Paper`
        document.querySelector('.resFinal').innerHTML = 'Ties'

        document.getElementById("ties").textContent = `Ties : ${skor.ties+=1}`
        localStorage.setItem('skor',JSON.stringify(skor))
      }else if (comp === 'scissor'){
        document.getElementById("ket").textContent = `Computer choose ${comp} - You choose Paper`
        document.querySelector('.resFinal').innerHTML = 'Lose'

        document.getElementById("resultComp").textContent = `Loses : ${skor.skorComp+=1}`
        localStorage.setItem('skor',JSON.stringify(skor))
      }else {
        document.getElementById("ket").textContent = `Computer choose ${comp} - You choose Paper`
        document.querySelector('.resFinal').innerHTML = 'Win'
        
        document.getElementById("resultPlayer").textContent = `Wins : ${skor.skorPlayer+=1}`
        localStorage.setItem('skor',JSON.stringify(skor))
      }
      console.log(localStorage.getItem('skor'))
    }
    function scissor(){
      let comp = match()
      if(comp === 'scissor'){
        document.getElementById("ket").textContent = `Computer choose ${comp} - You choose Scissor`
        document.querySelector('.resFinal').innerHTML = 'Ties'

        document.getElementById("ties").textContent = `Ties : ${skor.ties+=1}`
        localStorage.setItem('skor',JSON.stringify(skor))
      }else if (comp === 'rock'){
        document.getElementById("ket").textContent = `Computer choose ${comp} - You choose Scissor`
        document.querySelector('.resFinal').innerHTML = 'Lose'

        document.getElementById("resultComp").textContent = `Loses : ${skor.skorComp+=1}`
        localStorage.setItem('skor',JSON.stringify(skor))
      }else {
        document.getElementById("ket").textContent = `Computer choose ${comp} - You choose Scissor`
        document.querySelector('.resFinal').innerHTML = 'Wins'

        document.getElementById("resultPlayer").textContent = `Wins : ${skor.skorPlayer+=1}`
        localStorage.setItem('skor',JSON.stringify(skor))
      }
      console.log(localStorage.getItem('skor'))
    }

    
  </script>
</body>
</html>